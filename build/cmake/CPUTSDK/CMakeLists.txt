ADD_CUSTOM_COMMAND(OUTPUT ${CPUT_PROJECT_DIR}/src/sdk/CPUIdentifier.cpp
	COMMAND "${PYTHON_EXECUTABLE}" "${CPUT_PROJECT_DIR}/src/sdk/data/autogen.py")
ADD_CUSTOM_TARGET(autogen ALL DEPENDS ${CPUT_PROJECT_DIR}/src/sdk/CPUIdentifier.cpp)

SET(LIB_NAME CPUTSDK)

SET(CPUTSDK_SOURCE_FILES
	${CPUT_PROJECT_DIR}/src/sdk/CPU.cpp
)

SET(CPUTSDK_HEADER_FILES
	${CPUT_PROJECT_DIR}/include/CPU-T/Config.hpp
	${CPUT_PROJECT_DIR}/include/CPU-T/CPU.hpp
)

SOURCE_GROUP("Source Files" FILES ${CPUTSDK_SOURCE_FILES})
SOURCE_GROUP("Header Files" FILES ${CPUTSDK_HEADER_FILES})

INCLUDE_DIRECTORIES(${CPUT_PROJECT_DIR}/include)

ADD_LIBRARY(${LIB_NAME} STATIC
	${CPUTSDK_SOURCE_FILES} ${CPUTSDK_HEADER_FILES}
)

SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES
	ARCHIVE_OUTPUT_DIRECTORY ${CPUT_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${CPUT_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${CPUT_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELWITHDEBINFO ${CPUT_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_MINSIZEREL ${CPUT_OUTPUT_DIR}
	PROJECT_LABEL ${LIB_NAME}
	DEBUG_POSTFIX ${CMAKE_DEBUG_POSTFIX}
	OUTPUT_NAME ${LIB_NAME}_${CPUT_COMPILER_NAME}${CPUT_COMPILER_VERSION}_${CPUT_ARCH_NAME}
)

ADD_DEPENDENCIES(${LIB_NAME} autogen)

TARGET_LINK_LIBRARIES(${LIB_NAME})

